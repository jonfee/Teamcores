
@{
	ViewData["Title"] = "学习计划详情";
}

<template v-if="details!=null">
	<dl>
		<dd>标题</dd>
		<dt>{{ details.Title }}</dt>
		<dd>创建者</dd>
		<dt>{{ details.UserName }}</dt>
		<dd>说明</dd>
		<dt>{{ details.Content }}</dt>
	</dl>
</template>
<template v-if="!hasAccess">
	<p class="error-tip">无访问权限</p>
</template>

@section title_actions{
	<i-button type="success" v-on:click="">返回列表</i-button>
}

@section page_script{
	<script>
		var vm = new Vue({
			el: '#content',
			data: {
				//是否有访问权限
				hasAccess: true,
				//详细信息内容结构
				details: {
					PlanId: 0,
					UserId: 0,
					UserName: '用户名',
					Title: '我是学习计划标题',
					Content: '我是学习计划内容',
					StudentCount: 0,
					Status: 1,
					CreateTime: '2017-08-18 12:30:30',
					Courses: [
						{
							CourseId: 0,
							SubjectId: 0,
							Title: '课程标题',
							Image: '/img/course/123.jpg',
							Remarks: '课程说明',
							Content: '课程内容',
							Objective: '课程学习目标',
							Status: 1,
							Sort: 1
						}
					],
					Students: [
						{
							UserId: 0,
							Username: '学员姓名',
							Email: 'jonfeee@qq.com',
							Mobile: '15920001111',
							Name: '姓名',
							Title: '头衔',
							StudyStatus: 1,
							Progress: 0,
							LastStudyTime: ''
						}
					]
				}
			},
			mounted() {
				//当前查看的学习计划ID
				this.details.PlanId = @(Html.Raw("'" + Html.ViewContext.RouteData.Values["id"] + "'"));

				// 获取学习计划详细信息
				//this.getDetails();
			},
			methods: {
				/**
				 * 获取学习计划详细信息
				 */
				getDetails() {
					Ajax.get({
						url: '/api/studyplan/details/' + this.details.PlanId,
						success: (response) => {
							var data = response.data;
							if (!data.Error) {
								this.details = data.Data;
							} else {
								this.details == null;
								this.$Message.error(data.Message);
							}
						},
						error: (error) => {
							this.details == null;
							this.$Message.error('请求数据失败，请重试！');
						}
					});
				}
			}
		});
	</script>
}

