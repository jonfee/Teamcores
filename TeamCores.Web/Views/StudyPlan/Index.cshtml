@{
	ViewData["Title"] = "学习计划";
	ViewData["HideTitleBar"] = true;
}

<template>
	<Tabs :value="defaultTab" type="card" :animated="false" v-on:on-click="tabChange">
		<Tab-pane label="学习计划管理" name="plans">
			<study_plans :loading="plansLoading"></study_plans>
		</Tab-pane>
		<Tab-pane label="我的学习计划" name="myplans">
			<my_plans :loading="myPlansLoading"></my_plans>
		</Tab-pane>
	</Tabs>
</template>

@section page_script{
	<script src="~/js/vue/components/plans.js"></script>
	<script src="~/js/vue/components/plans.my.js"></script>
	<script>
		var vm = new Vue({
				el: '#content',
				data:{
					plansLoading: false,
					myPlansLoading: false
				},
				components:{
					'study_plans': studyPlans,
					'my_plans': myPlans
				},
				computed:{
					/**
					 * 默认标签页名称
					 */
					defaultTab(){
						return "myplans";
					}
				},
				methods:{
					/**
					 * 标签切换
					 * @@param {string} name 组件传递过来的当前点击的标签名称
					 */
					tabChange(name){
						if(name == "plans" && this.plansLoading === false){
							this.plansLoading = true;
						}
						else if(name == "myplans" && this.myPlansLoading === false){
							this.myPlansLoading = true;
						}
					}
				}
			});
	</script>
}

